{"componentChunkName":"component---src-templates-blog-post-index-js","path":"/2020_03_27_github_action/","result":{"data":{"site":{"siteMetadata":{"title":"My training box","author":"kklyoon"}},"markdownRemark":{"id":"62611290-1e2e-590c-b91d-d09a865cd2bc","html":"<p>블로그 포스팅하는데 글 작성 후  <code class=\"language-text\">npm run deploy</code>  명령을 쳐야 하는게 번거로웠다. 더불어 그때그때 commit, push 등을 해줘야한다는 것도.....</p>\n<p>깃헙 action 이 나온지 좀 됐지만 세팅해야지 해야지 하다가 오늘에야 세팅</p>\n<p>검색해보니 누가 스크립트를 이미 만들어 놓은것이 있어서 쉽게 해결되었다.</p>\n<p><a href=\"https://github.com/marketplace/actions/gatsby-publish\">https://github.com/marketplace/actions/gatsby-publish</a></p>\n<p><a href=\"https://help.github.com/en/github/authenticating-to-github/creating-a-personal-access-token-for-the-command-line\">Personnal Access Token</a>을 세팅 (권한을 뭐뭐 줘야하는지 헷갈리긴하는데 일단 repo, write:package, read:package, admin:org, user, workflow 이렇게 줬는데 잘 동작했다. 하지만 이렇게 까지는 필요없고 read, write 권한만 있으면 되지 않을까 생각함)하고 해당 repo 세팅에서 Secrets 으로 만들어줘야 한다.</p>\n<p>Actions 메뉴에서 다음과 같이 Workflow 를 만들어주면 끝</p>\n<div class=\"gatsby-highlight\" data-language=\"text\">\n      <pre class=\"language-text\"><code class=\"language-text\">name: Publish\n\non:\n  push:\n    branches: [ develop ]\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n\n    # Steps represent a sequence of tasks that will be executed as part of the job\n    steps:\n    - uses: actions/checkout@v1\n    - uses: enriikke/gatsby-gh-pages-action@v2\n      with:\n        access-token: ${{ secrets.ACCESS_TOKEN}}</code></pre>\n      </div>\n<p>이제 develop 브랜치에 push만 하면 자동으로 빌드되어 배포됨. 자동화하니 편하다.</p>","excerpt":"블로그 포스팅하는데 글 작성 후    명령을 쳐야 하는게 번거로웠다. 더불어 그때그때 commit, push 등을 해줘야한다는 것도..... 깃헙 action…","frontmatter":{"title":"github action 사용하기 (gatsby 자동 배포)","date":"2020-03-27","tags":["git","github","githubaction","action","gatsby","npm"],"keywords":["My training box"]}}},"pageContext":{"slug":"/2020_03_27_github_action/","previous":{"fields":{"slug":"/2019_11_05_android_context/"},"frontmatter":{"title":"[번역] Context? 무슨 Context?","tags":["안드로이드","Android","Context"],"published":true}},"next":{"fields":{"slug":"/2020_03_27_cutting_rod/"},"frontmatter":{"title":"[Algorithm] 막대 자르기","tags":["programming","algorithm","알고리즘","막대자르기"],"published":true}}}},"staticQueryHashes":["3649515864"]}